# Сервис обмена мнгновенными сообщениями
Простой сервис для обмена мгновенными сообщениями между пользователями в реальном времени.


## Запуск приложения
Для запуска FastAPI используется веб-сервер uvicorn. Команда для запуска выглядит так:  
```
uvicorn app.main:app --reload
```  
Ее необходимо запускать в командной строке, обязательно находясь в корневой директории проекта.

### Celery 
Для запуска Celery используется команда  
```
celery --app=app.tasks.celery:celery worker -l INFO -P solo
```
Обратите внимание, что `-P solo` используется только на Windows, так как у Celery есть проблемы с работой на Windows.  


### Docker compose
Для запуска всех сервисов (БД, Redis, веб-сервер (FastAPI), Celery) необходимо использовать файл docker-compose.yml и команды
```
docker compose build
docker compose up
```
Причем `build` команду нужно запускать, только если вы меняли что-то внутри Dockerfile, то есть меняли логику составления образа.

***
Войдите в браузер и впишите в адресную строку `localhost`, вас перенаправит на страницу регистрации. После того, как вы 
введете данные и нажмете на кнопку `Зарегистрировать нового пользователя`, перейдите на страницу логина нажав кнопку `уже есть аккаунт? Войдите`. Корректно указав свои данные и нажав `Залогиниться` вас перенаправит на страницу чата, где вы можете уже обмениваться сообщениями.

-----------------------------------------------------------------------------


Сервис позволяет регистрировать новых пользователей и проводить авторизацию и аутентификацию. Онлайн чат позволяет авторизованным пользователям обмениваться мнгновенными сообщениями. Сообщения заносятся в базу данных и считываются из нее. Есть возможность получения истории сообщений.

Запрос `GET` по пути `chat/last_messages` позволяет получить историю сообщений в формате JSON.

Запрос `GET` по пути `chat/user` позволяет авторизовать пользователя. После успешной авторизации возвращает имя пользователя в текстовом формате.

Запрос `POST` по пути `auth/register` позволяет зарегистрировать нового пользователя: в базу данных заносятся имя и хэшированный пароль пользователя. При успешном ответе возвращает null.

Запрос `POST` по пути `auth/login` позволяет аутентифицировать пользователя: проверяется есть ли в системе пользователь, проверяется пароль, сетится cookie. При успешном ответе возвращает null и редиректит на страницу чата.

